## Java 并发：各种锁

#### 公平锁、非公平锁

公平锁：线程获取锁的顺序与其申请锁的顺序一直，谁先申请，谁早获得，我可以在创建  ReentrantLock 的时候传入一个 true 参数来创建一个公平锁。

非公平锁：线程获取锁的顺序与其申请锁的顺序无关，synchronized 就是典型的非公平锁。

#### 可重入锁

可重入锁就是线程在获取锁之后，可以继续获取这个锁，但是获取锁的次数与释放锁的次数必须一致，要不然其他线程是无法获取该锁的。

synchronized 和 ReentrantLock 都是可重入锁。

不可重入锁就是在线程获取锁后，无法再次获取这个锁，会被阻塞。

#### 乐观锁、悲观锁

乐观锁：总是假设最好的情况，每次去拿数据的时候都认为别人不会修改，所以不会上锁，但是在更新的时候会判断一下在此期间别人有没有去更新这个数据。乐观锁通常 CAS 的方式来实现，Java 并发包下的 Atomic 原子类，都属于乐观锁。

悲观锁：总是假设最坏的情况，每次去拿数据的时候都认为别人会修改，所以每次在拿数据的时候都会上锁，这样别人想拿这个数据就会阻塞直到它释放锁。synchronized 和 ReentrantLock 都属于悲观锁。

#### 自旋锁

所谓自旋，就是循环尝试的意思，最典型 Java 并发包中的原子类，它们都是通过自旋 + CAS 的方式来实现原子性操作的。

