## HTTPS、SSL TLS

> 2019/10/9

#### 为什么需要 HTTPS

HTTP 是明文传输，整个传输过程完全透明，任何人都能在链路中截获、修改或者伪造请求 / 响应报文，数据不具有可信性。

通信安全的四要素：

1. 机密性：数据是保密的，只有具有相关权限的人才能访问。
2. 完整性：数据在传输过程中没有被篡改。
3. 身份认证：能够确认对方的身份，保证消息发送给可信的人。
4. 不可否认：不能否认已经发生过的行为。

#### HTTPS

相比 HTTP，HTTPS 的协议名是 “https” 默认端口号是 “443”，至于其他的请求-应答模式、报文结构、请求方法、URI、头字段、连接管理等等完全是用的 HTTP 的东西。

HTTPS 为 HTTP 添加了上面的四个要素，来保证通信的安全，它在 TCP/IP 协议上添加了一层 SSL/TLS 来保证通信的安全，让 HTTP 运行在安全的 SSL/TLS 协议上面，收发报文不再使用 Socket API，而是调用专门的安全接口。

![](../resource/image/50d57e18813e18270747806d5d73f0a3.png)

#### SSL/TLS

SSL 是一个安全的通信协议，最初由网景公司研发，1999 年互联网工程组 IETF 将其改名为 TLS，正式标准化。

TLS 由记录协议、握手协议、警告协议、变更密码规范协议、扩展协议等几个子协议组成，综合使用了对称加密、非对称加密、身份认证等许多密码学技术。

客户端和服务器在使用 TLS 建立连接是需要选择一组恰当的加密算法来实现安全通信，这些算法的组合被称为密码套件，也叫做加密套件。

例如：ECDHE-RSA-AES256-GCM-SHA384

格式：秘钥交换算法-签名算法-对称加密算法-摘要算法

上面的意思：握手时使用 ECDHE 算法进行密钥交换，用 RSA 进行签名和身份认证，握手后的通信使用 AES 对称算法，密钥长度 256 位，分组模式 GCM，使用 SHA384 摘要算法进行消息认证和产生随机数。

#### OpenSSL

> https://github.com/openssl/openssl

OpenSSL 是一个著名的密码学开源库，已经成为了事实上的标注，许多应用软件都会使用它作为底层实现 TLS 功能。

#### HTTP 和 HTTPS 的区别

1. HTTP 是明文传输，不安全；HTTPS 传输的是加密后的报文，具有机密性、完整性、身份认证、不可否认等特性。
2. HTTP 的协议名称是 http，默认端口号是 80；HTTPS 的协议名称是 https 默认端口号是 443。
3. HTTP 运行在 TCP/IP 协议之上，HTTPS 在 TCP/IP 协议上面加了一层 SSL/TLS 协议来保证数据安全。
4. HTTP 相比 HTTPS 在报文传输上无需加密解密，性能更好一些。

