## HTTP 请求方法

> 2019/9/19

HTTP 请求是客户端发出的、要求服务器执行的、对资源的一种操作。

请求方法仅仅是对服务器的 ”指示“，真正如何处理由服务器决定；例如：GET 完全能实现增删改查所有的操作，全看服务器如何解释，协议就是一个要求通信双方都遵守的约定，当然也可以不遵守。。

#### 八种标准的请求方法

HTTP/1.1 规定了八种标准的请求方法，单词都要求是大写形式：

- GET：获取资源，可以理解为读取或者下载数据
- HEAD：获取资源的元信息
- POST：向资源提交数据，相当于写入或者上传数据
- PUT：类似 POST
- DELETE：删除资源
- CONNECT：建立特殊的连接隧道
- OPTIONS：列出可对资源实行的方法
- TRACE：追踪 请求-响应 的传输路径

#### GET/HEAD

GET 的含义是从服务器获取资源，在 URI 后面使用 # 可以在获取资源后直接定位到某个标签所在的位置，使用 Range 字段表示范围请求，只获取一部分资源，多线程下载常用。

HEAD 方法与 GET 方法类似也是从服务器获取资源，但是服务器不会返回请求的实体数据，只会返回响应头，也就是资源的 “元信息”。

HEAD 方法可以看做 GET 方法的简化版，它的响应头与 GET 完全一致，所以可以用在很多并不是真正需要资源的场合，避免传输 body 数据的浪费。

比如，要检查一个文件是否存在，只需要发一个 HEAD 请求就可以了，没必要把整个文件都下载下来；检查文件是否有新的版本，同样也应该用 HEAD，一般服务器会在响应头里面把文件的修改时间传回来。

注意：测试了分别使用 GET 和 HEAD 请求 http://www.baidu.com/，发现响应的 header 并不一致，GET 返回了 18 个 header，HEAD 只返回了 8 个。

####POST/PUT

POST 的使用频率仅次于 GET，只要向服务器发送数据用的大多是 POST。

而 PUT 与 POST 类似，也是向服务器提交数据，但是与 POST 有微妙的不同，通常 POST 便是新建 “create” 的含义，PUT 表示修改 “update” 的含义。

#### DELETE

delete 方法表示删除服务器的资源，因为这个动作危险性太大，所以服务器通常不会真正执行删除操作，而是对资源字一个删除标记。当然，更多的时候服务器直接不处理 DELETE 请求。

#### 安全与幂等

在 HTTP 协议里，所谓 **安全** 是指请求方法不会破坏服务器上的资源，即不会对服务器上的资源造成实质性的修改。

按照这个定义 GET/HEAD 方法是安全的，因为它们是只读操作。

而 POST/PUT/DELETE 会修改服务器上的资源，增加或者删除数据，是不安全的。

**幂等** 的意思是：多次执行相同的操作，结果也是相同的；在 HTTP 这可以解释为客户端的操作对服务器的状态没有改变。

显然 GET/HEAD 是幂等的，DELETE 多次删除同一个资源，效果都是 “资源不存在”，也是幂等的。

按照 RFC 的语义，POST 是 ”新增或者提交数据“，多次提交数据会创建多个资源，所以不是幂等的；而 PUT 是 ”替换或者更新资源“，多次更新一个资源，资源还会是第一次更新状态，所以是幂等的。

POST 类似 SQL 语句中的 INSERT，PUT 类似 UPDATE。







